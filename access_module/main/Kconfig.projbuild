menu "Portunus Configuration"

    menu "Feature Toggles"
        config PORTUNUS_ENABLE_MFRC522
            bool "Enable MFRC522 RFID reader"
            default y

        config PORTUNUS_ENABLE_HEARTBEAT
            bool "Enable heartbeat service"
            default y

        config PORTUNUS_ENABLE_WIFI
            bool "Enable WiFi connectivity"
            default y
            help
                Enable the WiFi station manager. When disabled the module
                runs in offline mode (events are logged locally only).
    endmenu

    menu "Network Configuration"
        depends on PORTUNUS_ENABLE_WIFI

        config PORTUNUS_WIFI_SSID
            string "WiFi SSID"
            default "portunus-dev"
            help
                SSID of the wireless network the module connects to.

        config PORTUNUS_WIFI_PASSWORD
            string "WiFi password"
            default ""
            help
                WPA2 passphrase. Leave empty for open networks.

        config PORTUNUS_WIFI_CONNECT_TIMEOUT_MS
            int "WiFi connection timeout (milliseconds)"
            default 15000
            range 5000 60000
            help
                Maximum time wifi_mgr_start() blocks waiting for an IP
                address. The manager continues reconnecting in the
                background after this timeout expires.

        config PORTUNUS_WIFI_RECONNECT_INTERVAL_MS
            int "WiFi reconnect base interval (milliseconds)"
            default 1000
            range 500 10000
            help
                Base delay before the first reconnection attempt after a
                disconnect. The interval doubles on each failure up to a
                60-second ceiling, and resets on a successful connection.

        config PORTUNUS_SERVER_HOST
            string "Portunus server host"
            default "192.168.1.100"
            help
                Hostname or IP address of the Portunus server.

        config PORTUNUS_SERVER_PORT
            int "Portunus server port"
            default 8080
            range 1 65535
            help
                TCP port the Portunus server listens on.

        config PORTUNUS_SERVER_REQUEST_TIMEOUT_MS
            int "HTTP request timeout (milliseconds)"
            default 5000
            range 1000 30000
            help
                Maximum time to wait for a response from the server on
                heartbeat and access-request HTTP calls.
    endmenu

    menu "Task Configuration"
        config PORTUNUS_MFRC522_TASK_STACK_SIZE
            int "MFRC522 polling task stack size"
            default 4096
            range 2048 8192
    endmenu

    menu "SPI Pin Assignments (MFRC522)"
        config PORTUNUS_SPI_MOSI_PIN
            int "SPI MOSI GPIO pin"
            default 37
            help
                GPIO pin connected to the MFRC522 MOSI line.

        config PORTUNUS_SPI_MISO_PIN
            int "SPI MISO GPIO pin"
            default 38
            help
                GPIO pin connected to the MFRC522 MISO line.

        config PORTUNUS_SPI_SCLK_PIN
            int "SPI SCLK GPIO pin"
            default 36
            help
                GPIO pin connected to the MFRC522 SCLK line.

        config PORTUNUS_SPI_CS_PIN
            int "SPI CS GPIO pin"
            default 35
            help
                GPIO pin connected to the MFRC522 SDA/CS line.

        config PORTUNUS_MFRC522_RST_PIN
            int "MFRC522 RST GPIO pin"
            default 4
            help
                GPIO pin connected to the MFRC522 RST line.
                Set to -1 to leave RST unconnected (not recommended).
    endmenu

    menu "Timing Configuration"
        config PORTUNUS_HEARTBEAT_INTERVAL_MS
            int "Heartbeat interval (milliseconds)"
            default 10000
            range 1000 60000
            help
                Interval between heartbeat events. 10 seconds is a
                reasonable default for development.

        config PORTUNUS_MFRC522_POLL_INTERVAL_MS
            int "MFRC522 card poll interval (milliseconds)"
            default 250
            range 50 2000
            help
                How frequently the MFRC522 driver checks for a card
                in the reader field. Lower values are more responsive
                but increase SPI bus traffic.

        config PORTUNUS_EVENT_QUEUE_TIMEOUT_MS
            int "Event bus queue send/receive timeout (milliseconds)"
            default 100
            range 10 5000
            help
                Maximum time to block when sending to or receiving from
                the event bus queue.
    endmenu

    menu "Event Bus Configuration"
        config PORTUNUS_EVENT_QUEUE_LENGTH
            int "Event bus queue depth"
            default 16
            range 4 64
            help
                Number of events the dispatcher queue can hold. A deeper
                queue absorbs bursts but consumes more RAM.

        config PORTUNUS_MAX_EVENT_SUBSCRIBERS
            int "Maximum event subscribers"
            default 8
            range 2 32
            help
                Maximum number of callback subscribers the event bus
                supports. Increase if more components need to listen.
    endmenu

endmenu